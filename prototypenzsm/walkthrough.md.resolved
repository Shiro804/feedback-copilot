# JSONL Ingest API - Walkthrough

## Was wurde implementiert

### Neuer API-Endpoint: `/api/ingest/stream`

**Datei:** [ingest.py](file:///c:/Users/Selim/OneDrive/Master/Masterarbeit/Literatur/feedback-copilot/backend/routes/ingest.py)

Akzeptiert JSONL oder JSON-Array im Request Body:
```json
[{"text":"...", "label":"NAVIGATION", "vehicle_model":"ID.4", "market":"DE"}]
```

### Features
- ✅ JSONL und JSON-Array Parsing
- ✅ Automatische ID-Generierung
- ✅ PII-Anonymisierung
- ✅ Emotion→Style Mapping (anger→complaint, joy→praise)
- ✅ Metadaten-Anreicherung für bessere Suche

---

## Test-Ergebnis

```json
{
  "success": true,
  "processed": 1,
  "pii_anonymized": 0,
  "stats": {
    "by_label": {"NAVIGATION": 1},
    "by_model": {"ID.4": 1},
    "by_market": {"DE": 1}
  }
}
```

---

## Dokumentation

**Erstellt:** [PIPELINE_INTEGRATION.md](file:///c:/Users/Selim/OneDrive/Master/Masterarbeit/Literatur/feedback-copilot/docs/PIPELINE_INTEGRATION.md)

Enthält:
- Setup-Anleitung für beide Projekte
- Python-Beispielcode für Integration
- Feldmapping-Tabelle
- cURL-Testbefehle

---

## Next Steps für Kollegen

1. `pip install requests` im ASR-Stack
2. Nach Feedback-Detection aufrufen:
```python
import requests
requests.post("http://localhost:8000/api/ingest/stream", json=[feedback_data])
```
